<!DOCTYPE html><html><head><style id="mceDefaultStyles" type="text/css">body {min-height: 150px}
.mce-content-body {-webkit-touch-callout: none}
</style><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" id="u0" href="https://zh-tw.rakko.tools/tools/129/lib/tinymce/skins/ui/oxide/content.min.css"><link rel="stylesheet" type="text/css" id="u1" href="https://zh-tw.rakko.tools/tools/129/lib/tinymce/skins/content/default/content.min.css"></head><body id="tinymce" class="mce-content-body " data-id="content" contenteditable="true" spellcheck="false"><p>&lt;!DOCTYPE html&gt;<br>&lt;html lang="zh-Hant"&gt;<br>&lt;head&gt;<br>&nbsp; &nbsp; &lt;meta charset="UTF-8"&gt;<br>&nbsp; &nbsp; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br>&nbsp; &nbsp; &lt;title&gt;LM Team&lt;/title&gt;<br>&nbsp; &nbsp; &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;<br>&nbsp; &nbsp; &lt;script src="https://static.line-scdn.net/liff/edge/2/sdk.js"&gt;&lt;/script&gt;<br>&nbsp; &nbsp; &lt;script type="module"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";<br>&nbsp; &nbsp; &nbsp; &nbsp; import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";<br>&nbsp; &nbsp; &nbsp; &nbsp; import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";</p><p>&nbsp; &nbsp; &nbsp; &nbsp; const CONFIG = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIFF_ID: "2008843042-HQANLx77",&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FIREBASE: {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; apiKey: "AIzaSyD-iTmN_rwJUWbNmbBiXva52dlNKyM4fSA",&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; projectId: "lmteam-4f2db",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; authDomain: "lmteam-4f2db.firebaseapp.com",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appId: "1:765459964596:web:765459964596"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; let db, auth, userProfile;<br>&nbsp; &nbsp; &nbsp; &nbsp; const appId = "lmteam-footprint-v1";</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // 輔助函式：複製文字<br>&nbsp; &nbsp; &nbsp; &nbsp; window.copyUrl = () =&gt; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = window.location.origin + window.location.pathname;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const el = document.createElement('textarea');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.value = url;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(el);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.select();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.execCommand('copy');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(el);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('copyHint').innerText = "✅ 已複製！請貼至 LINE 後台";<br>&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; async function init() {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const status = document.getElementById('statusText');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await liff.init({ liffId: CONFIG.LIFF_ID });<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!liff.isLoggedIn()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; liff.login();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; userProfile = await liff.getProfile();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('userName').innerText = `您好，${userProfile.displayName}`;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const app = initializeApp(CONFIG.FIREBASE);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db = getFirestore(app);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; auth = getAuth(app);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await signInAnonymously(auth);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerText = "連線成功，請開始打卡";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.querySelectorAll('.btn-punch').forEach(b =&gt; b.disabled = false);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (err) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const currentUrl = window.location.origin + window.location.pathname;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerHTML = `<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-rose-600 font-bold mb-2"&gt;網址不匹配 (404/Error)&lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-[10px] text-slate-500 mb-4"&gt;請將下方網址完整填入 LINE Developers 的 Endpoint URL：&lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="bg-slate-100 p-2 rounded text-[10px] text-blue-600 break-all mb-4 border border-blue-200"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${currentUrl}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="copyUrl()" class="bg-blue-600 text-white text-xs py-2 px-4 rounded-full font-bold shadow-md"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 點我複製正確網址<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="copyHint" class="text-[9px] text-emerald-600 mt-2 font-bold"&gt;&lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p>&nbsp; &nbsp; &nbsp; &nbsp; window.doPunch = (type) =&gt; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const status = document.getElementById('statusText');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const btns = document.querySelectorAll('.btn-punch');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; btns.forEach(b =&gt; b.disabled = true);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerHTML = `&lt;span class="animate-pulse text-blue-500"&gt;地理座標傳輸中...&lt;/span&gt;`;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; navigator.geolocation.getCurrentPosition(async (pos) =&gt; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'checkins'), {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name: userProfile.displayName,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uid: userProfile.userId,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; timestamp: serverTimestamp(),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: type,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lat: pos.coords.latitude,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lng: pos.coords.longitude<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerHTML = `&lt;div class="text-emerald-600 font-bold text-lg"&gt;✨ ${type === 'IN' ? '上班' : '下班'}打卡成功&lt;/div&gt;`;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (e) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerText = "寫入資料庫失敗";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTimeout(() =&gt; btns.forEach(b =&gt; b.disabled = false), 2000);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, (err) =&gt; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status.innerText = "GPS 定位失敗，請授權位置權限";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; btns.forEach(b =&gt; b.disabled = false);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, { enableHighAccuracy: true });<br>&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; window.onload = init;<br>&nbsp; &nbsp; &lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body class="bg-slate-900 min-h-screen flex flex-col items-center justify-center p-6 text-slate-200"&gt;<br>&nbsp; &nbsp; &lt;div class="bg-white w-full max-w-sm rounded-[3rem] shadow-2xl p-10 text-center border border-slate-700/10"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="mb-8"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="w-16 h-16 bg-blue-50 rounded-2xl mx-auto flex items-center justify-center mb-4 text-blue-600"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/svg&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 class="text-2xl font-black text-slate-800"&gt;軒揚數理 教師打卡系統&lt;/h1&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p id="userName" class="text-slate-400 text-sm mt-1 tracking-tight"&gt;V20260107&lt;/p&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3 mb-8"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button id="workBtn" onclick="doPunch('IN')" disabled class="btn-punch w-full py-4 rounded-xl bg-blue-600 text-white font-bold shadow-lg active:scale-95 transition-all"&gt;上班簽到&lt;/button&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button id="offBtn" onclick="doPunch('OUT')" disabled class="btn-punch w-full py-4 rounded-xl bg-slate-800 text-white font-bold shadow-lg active:scale-95 transition-all"&gt;下班簽退&lt;/button&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="statusText" class="text-xs text-slate-500 bg-slate-50 py-6 px-4 rounded-2xl min-h-[6rem] flex flex-col items-center justify-center border border-slate-100"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 偵測環境中...<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br>&nbsp; &nbsp; &lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</p><p><br data-mce-bogus="1"></p></body></html>